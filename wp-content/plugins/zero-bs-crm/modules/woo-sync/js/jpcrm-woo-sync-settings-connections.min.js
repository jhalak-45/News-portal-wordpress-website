function jpcrm_woosync_bind_add_connection(){jQuery("#jpcrm-woosync-connect-to-store").on("click",function(){var o='<div style="font-size: 1.2em;padding: 0.3em;">'+zeroBSCRMJS_globViewLang("connect-woo-site-url")+'<br /><div class="ui input" style="width: 350px;"><input type="text" name="jpcrm-connect-woocommerce-store-url" id="jpcrm-connect-woocommerce-store-url" value="" placeholder="'+zeroBSCRMJS_globViewLang("connect-woo-site-placeholder")+'" /></div><div class="jpcrm-woosync-add-connection-errors"><div class="ui hidden pointing red basic label" id="jpcrm-woosync-connect-to-store-invalid-url-empty">'+zeroBSCRMJS_globViewLang("connect-woo-invalid-url-empty")+'</div><div class="ui hidden pointing red basic label" id="jpcrm-woosync-connect-to-store-invalid-url">'+zeroBSCRMJS_globViewLang("connect-woo-invalid-url-detail")+'</div><div class="ui hidden pointing red basic label" id="jpcrm-woosync-connect-to-store-invalid-url-http">'+zeroBSCRMJS_globViewLang("connect-woo-invalid-url-http")+'</div><div class="ui hidden pointing red basic label" id="jpcrm-woosync-connect-to-store-invalid-url-duplicate">'+zeroBSCRMJS_globViewLang("connect-woo-invalid-url-duplicate")+'</div><div class="ui hidden pointing red basic label" id="jpcrm-woosync-connect-to-store-ajax-error">'+zeroBSCRMJS_globViewLang("connect-woo-ajax-error")+"</div></div></div>";swal({title:'<i class="plug icon"></i> '+zeroBSCRMJS_globViewLang("connect-woo"),html:o,type:"",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:zeroBSCRMJS_globViewLang("connect-woo-go"),cancelButtonText:zeroBSCRMJS_globViewLang("cancel"),customClass:"swal-wide",preConfirm:function(){var e=jpcrm_strip_trailing_slashes(jQuery("#jpcrm-connect-woocommerce-store-url").val());return new Promise(function(n,o){if(jQuery(".jpcrm-woosync-add-connection-errors > div").addClass("hidden"),""===e)return jQuery("#jpcrm-woosync-connect-to-store-invalid-url-empty").removeClass("hidden"),o(),!1;if(window.zbs_root.woosync_connections&&0<=window.zbs_root.woosync_connections.indexOf(e))return jQuery("#jpcrm-woosync-connect-to-store-invalid-url-duplicate").removeClass("hidden"),o(),!1;if("http:"==e.substring(0,5))return jQuery("#jpcrm-woosync-connect-to-store-invalid-url-http").removeClass("hidden"),o(),!1;if("https://"!==e.substring(0,8)&&(e="https://"+e),!jpcrm_looks_like_URL(e))return jQuery("#jpcrm-woosync-connect-to-store-invalid-url").removeClass("hidden"),o(),!1;o={action:"jpcrm_woosync_get_auth_url",sec:window.zbs_root.woosync_token,site_url:e};jQuery.ajax({type:"POST",url:ajaxurl,data:o,dataType:"json",timeout:2e4,success:function(o){void 0!==o.target_url?window.location.replace(o.target_url):jQuery("#jpcrm-woosync-connect-to-store-ajax-error").removeClass("hidden"),n()},error:function(o){jQuery("#jpcrm-woosync-connect-to-store-ajax-error").removeClass("hidden"),n()}})}).catch(o=>!1)}}).then(function(o){o.value})})}function jpcrm_woosync_bind_add_connection_inputchange(){jQuery("#jpcrm-connect-woocommerce-store-url").on("change",function(){jpcrm_looks_like_URL(jQuery(this).val())&&jQuery("#jpcrm-woosync-connect-to-store-invalid-url").addClass("hidden")})}jQuery(function(o){jpcrm_woosync_bind_add_connection()});